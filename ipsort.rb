#!/usr/bin/env ruby

#JoSko - 11.03.2016

=begin
Take in a file of line-separated IP addresses, sort and unique them, and then print them out to STDOUT.
Performs a numeric sort, rather than the typical string sort in `sort -u`, etc

ipsort:
 192.168.1.1
 192.168.1.2
 192.168.1.10

sort:
 192.168.1.1
 192.168.1.10
 192.168.1.2
=end

#Print help if no arguments supplied
if ARGV.empty?
	puts "Input a file of line-separated IP addresses, and outputs sorted line-separated list..."
	puts "ipsort.rb FILE"
else
	ip_array = IO.readlines "#{ARGV[0]}"
	ip_array.sort_by! { |ip| ip.split(".").map(&:to_i) }
	ip_array.uniq.each { |ip| puts ip }
end
